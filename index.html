<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
	<title>营业厅</title>
	<link rel="stylesheet" href="bower_components/weui/dist/style/weui.min.css"/>
	<link rel="stylesheet" href="css/stateGrid_businessHall.css" />
</head>
<body ontouchstart class="bh-businessHall">
	<!--营业厅首页-->
	<div class="header">
		<ul class="row-1" id="userNumber">
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001141</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋1李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001141</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋1李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001142</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋2李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001143</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋3李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001144</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋4李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
			<li>
				<a class="clearfix" href="javascript:;">
					<div class="ellipsis">用户编码：<b class="houseCode">9900001145</b></div>
					<div class="ellipsis">户名：<b class="houseName">李秋5李秋李秋李秋李秋李秋</b></div>
				</a>
			</li>
		</ul>
		<div class="row-2 clearfix" id="userInfo">
			<div class="row-2-item">
				<address class="ellipsis-2">地址：武汉市洪山区武汉市洪山区武汉市洪武汉市洪山区武汉市洪山区武汉</address>
				<div class="balance">
					<span>可用余额</span>
					<span class="red-1">¥2.00</span>
				</div>
				<div>可用余额不足，<a href="" class="green-1">立即缴费</a></div>
			</div>
			<div class="row-2-item">
				<svg data-src="svg/dashboard.svg" id="svgLoader"></svg>
				<div class="ellipsis">当前处于<span class="orange-1">第二阶段</span></div>
			</div>
		</div>
	</div>

	<div class="notice">
		<a href="javascript:;"><em class="red-1">消息提醒：</em> </a>
		<div class="newsMarquee">
			<ul>
				<li class="ellipsis">您的xxx问题已经有新的回复您的xxx问题已经有新的回复您的xxx问题已经有新的回复</li>
				<li class="ellipsis">1455***125　抽中200元</li>
				<li class="ellipsis">1455***125　抽中300元</li>
				<li class="ellipsis">1455***125　抽中400元</li>
			</ul>
		</div>
	</div>

	<div class="weui-grids">
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-1.png" alt="">
			</div>
			<p class="weui-grid__label">添加户号</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-2.png" alt="">
			</div>
			<p class="weui-grid__label">我的账单</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-3.png" alt="">
			</div>
			<p class="weui-grid__label">充值缴费</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-4.png" alt="">
			</div>
			<p class="weui-grid__label">实时电量</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-5.png" alt="">
			</div>
			<p class="weui-grid__label">用电分析</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-6.png" alt="">
			</div>
			<p class="weui-grid__label">我的网格员</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-7.png" alt="">
			</div>
			<p class="weui-grid__label">我的信息</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-8.png" alt="">
			</div>
			<p class="weui-grid__label">我的积分</p>
		</a>
		<a href="javascript:;" class="weui-grid">
			<div class="weui-grid__icon">
				<img src="img/1-9.png" alt="">
			</div>
			<p class="weui-grid__label">档案维护</p>
		</a>
	</div>

	<div class="weui-footer">
		<p class="weui-footer__text">国网安备：1515A975N</p>
		<p class="weui-footer__text">国网湖北省电力公司版权所有</p>
		<p class="weui-footer__text">Copyright2002-2013HBEPC,ALL Rights Reserved</p>
	</div>

	<script src="bower_components/jquery/dist/jquery.min.js"></script>
	<script src="js/newsMarquee.js"></script>

	<script src="js/weui-dialog.js"></script>
	<script src="js/businessHall.js"></script>
	<script src="js/common.js"></script>
	<script>
		$(document).ready(function() {
			var bh = new businessHall();
			bh.init();
		});
	</script>
	<script>
		//消息滚动
		$(function() { 
			$('.newsMarquee').newsMarquee();
		});

		//切换户名和户号
		var setSwtichForConsNo = function(){
			var $userNumber = $('#userNumber'),
					$firstLi = $userNumber.find('li:eq(0)'),
					$firstCode = $firstLi.find('.houseCode'),
					$firstName = $firstLi.find('.houseName'),
					isVisible = false;

			$userNumber.on("click", 'li', function(e){
				var $this = $(this),
						selectedCode = $this.find('.houseCode').text(),
						selectedName = $this.find('.houseName').text();
				if (isVisible) {
					if (selectedCode !== $firstCode.text()) {
						$firstCode.text(selectedCode);
						$firstName.text(selectedName);
					}
					$firstLi.removeClass('first').siblings().slideUp(200); //第一个li增加first类名，其它li收起来
					isVisible = false;
				} else {
					$firstLi.addClass('first').siblings().slideDown(200); //第一个li移除first类名，其它li展开
					isVisible = true;
				}
			});
		};

		//加载svg并设置指针角度
		$(function() {
			var $svgLoader = $('#svgLoader'),
				src = $svgLoader.data('src');
			$.ajax({
				url: src,
				dataType: 'xml',
				success: function(content) {
					var doc = content.documentElement;
					$svgLoader.after(doc).remove();

					//设置头部第2行左边与右边一样高
					var $header_mainInfo_div = $('#userInfo .row-2-item'),
						dashboardArea_h = $header_mainInfo_div.eq(1).height();
					$header_mainInfo_div.eq(0).height(dashboardArea_h);

					//svg加载完成后，设置列表的行高
					var li_h = Math.ceil($('.header').height() / $('#userNumber li').length),
						$userNumber = $('#userNumber');
					$userNumber.find('li').css('line-height', (li_h > 100 ? 100 : li_h) + 'px');
				},
				error: function(error) { 
					console.log(error);
				}
			}).done(function() { 
				var setPointerState = function(deg) { 
					deg = parseInt(deg);
					if (typeof deg === 'number') { 
						if (deg >= 0 && deg <= 54) { 
							$('#dashboard-pointer path').css('fill', '#0ABA66');
						}
						if (deg > 54 && deg <=216) { 
							$('#dashboard-pointer path').css('fill', '#f3a826');
						}
						if (deg > 216 && deg <= 270) { 
							$('#dashboard-pointer path').css('fill', '#ff4646');
						}
						if (deg >= 0 && deg <= 270) { 
							$('#dashboard-pointer').css({ 
								'-webkit-transform': 'rotate(' + deg + 'deg)',
								'transform': 'rotate(' + deg + 'deg)'
							});
						}
					}
				};
				/*
				 *根据参数设置指针角度
				 *指针的角度介于0－270度之间
				*/
				setTimeout(function() { 
					setPointerState(162);
				}, 100);
			})
		});
	</script>
</body>
</html>
